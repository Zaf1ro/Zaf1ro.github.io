<!DOCTYPE html>
<html lang="zh">
  <head>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



  <meta name="description" content="Cookie"/>




  <meta name="keywords" content="Network," />


<meta name="google-site-verification" content="qy4gf0StWj627u-7aIP3WDCLBi3jPYXhm57UC7TUcok" />
<meta name="baidu-site-verification" content="XJoPG7ad2Z" />

<link rel="alternate" hreflang="x-default" href="https://zaf1ro.github.io/p/4958.html" />
<link rel="alternate" hreflang="zh" href="https://zaf1ro.github.io/p/4958.html" />




  <link rel="alternate" href="/default" title="Zaf1ro" >




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.jpeg?v=1.1" />



<link rel="canonical" href="https://zaf1ro.github.io/p/4958.html"/>


<meta name="description" content="1. Cookie简介由于HTTP奉行的无状态原则, 导致Server无法判断这一次请求的的Client和下一次请求的Client是否为同一Client. Cookie的诞生使得Server可根据Cookie值来区分Client. Cookie目前有两个版本:Version 0和Version 1, 通过&quot;Set-Cookie&quot;和&quot;Set-Cookie2&quot;来">
<meta property="og:type" content="article">
<meta property="og:title" content="Cookie">
<meta property="og:url" content="https://zaf1ro.github.io/p/4958.html">
<meta property="og:site_name" content="Zaf1ro">
<meta property="og:description" content="1. Cookie简介由于HTTP奉行的无状态原则, 导致Server无法判断这一次请求的的Client和下一次请求的Client是否为同一Client. Cookie的诞生使得Server可根据Cookie值来区分Client. Cookie目前有两个版本:Version 0和Version 1, 通过&quot;Set-Cookie&quot;和&quot;Set-Cookie2&quot;来">
<meta property="og:locale">
<meta property="article:published_time" content="2017-05-15T14:55:42.000Z">
<meta property="article:modified_time" content="2024-08-20T16:43:04.044Z">
<meta property="article:tag" content="Network">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />




    <title>
Cookie - Zaf1ro
</title>
  <meta name="generator" content="Hexo 6.3.0"></head>

  <body>
  <nav id="sidebar" class="active on-post">
    <div id="third">
      <div id="sidebar-title">
        <h1 id="sidebar-title-text">
            <a href="/." class="logo">Home</a>
        </h1>
      </div>
      <div id="google-search">
  <script async src="https://cse.google.com/cse.js?cx=009060789867951546370:v3hkcobeuh9"></script>
  <div class="gcse-search"></div>
</div>
      
  <div id="toc">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Cookie%E7%AE%80%E4%BB%8B"><span class="toc-text">1. Cookie简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Version-0"><span class="toc-text">2. Version 0</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Syntax"><span class="toc-text">2.1 Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Compatibility"><span class="toc-text">2.2 Compatibility</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Version-1"><span class="toc-text">3. Version 1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Syntax"><span class="toc-text">3.1 Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Compatibility"><span class="toc-text">3.2 Compatibility</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Cookie%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">4. Cookie的注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-cookie-name%E5%92%8Ccookie-value%E7%9A%84%E8%A7%84%E5%88%99"><span class="toc-text">4.1 cookie-name和cookie-value的规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-domain%E7%9A%84%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98"><span class="toc-text">4.2 domain的匹配问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Cookie-prefixes-Host-%E5%92%8C-Secure"><span class="toc-text">4.3 Cookie prefixes: __Host-和__Secure-</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-SameSite%E6%9C%BA%E5%88%B6"><span class="toc-text">4.4 SameSite机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-Cookie%E7%9A%84%E4%B8%AA%E6%95%B0%E9%99%90%E5%88%B6%E5%92%8C%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6"><span class="toc-text">4.5 Cookie的个数限制和大小限制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AE%9E%E4%BE%8B"><span class="toc-text">5. 实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BB%8E%E7%BD%91%E9%A1%B5%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%AF%95%E5%90%8Edomain%E5%BD%92%E5%B1%9E%E6%9D%A5%E7%9C%8B"><span class="toc-text">5.1 从网页加载完毕后domain归属来看:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E4%BB%8E%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F%E6%9D%A5%E7%9C%8B"><span class="toc-text">5.2从加载顺序来看:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Chrome%E7%9A%84Cookie%E5%AD%98%E5%82%A8"><span class="toc-text">6. Chrome的Cookie存储</span></a></li></ol>
  </div>

    </div>
  </nav>

    <div id="page">
      <header id="masthead"><div class="site-header-inner">
  
  <button class="nav-mobile-button on-post" id="sidebarCollapse">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/></svg>
  </button>
  
  


  <nav id="nav-top">
    
      
      <ul id="menu-top" class="nav-top-items on-post">
      
        
          <li class="menu-item">
            <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zaf1ro">
              
              
                Github
              
            </a>
          </li>
        
      </ul>
    
  </nav>
</div>

      </header>
      <div id="content">
        
  <div class="primary">
    
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Cookie
        
      </h1>
      <time class="post-time">
          05/15/17
      </time>
    </header>

    <div class="post-content">
      <h2 id="1-Cookie简介"><a href="#1-Cookie简介" class="headerlink" title="1. Cookie简介"></a>1. Cookie简介</h2><p>由于HTTP奉行的无状态原则, 导致Server无法判断这一次请求的的Client和下一次请求的Client是否为同一Client. Cookie的诞生使得Server可根据Cookie值来区分Client. Cookie目前有两个版本:Version 0和Version 1, 通过&quot;Set-Cookie&quot;和&quot;Set-Cookie2&quot;来标示, 也可通过Version值来判断.</p>
<h2 id="2-Version-0"><a href="#2-Version-0" class="headerlink" title="2. Version 0"></a>2. Version 0</h2><h3 id="2-1-Syntax"><a href="#2-1-Syntax" class="headerlink" title="2.1 Syntax"></a>2.1 Syntax</h3><ul>
<li><code>&lt;cookie-name&gt;=&lt;cookie-value&gt;</code>: 必填项. 状态信息的名字为name, 其对应的值为value. name不可与其他属性项的名字重复.</li>
<li><code>expires=&lt;date&gt;</code>: 可选项. Cookie过期的时间, 格式: Wdy, DD-Mon-YY HH:MM:SS GMT. 未设置则设为本次回话结束.</li>
<li><code>max-age=&lt;non-zero-digit&gt;</code>: 可选项. 与expires功能一样, 指定cookie的生存周期(单位为秒). 如果max-age和expires都设置, max-age优先级更高.</li>
<li><code>domain=&lt;domain-value&gt;</code>: 可选项. 指定Cookie将要发送给哪个域.</li>
<li><code>path=&lt;path-value&gt;</code>: 可选项. 指定请求URL中必须存在的路径, 未设置此项则默认为&#39;&#x2F;&#39;</li>
<li><code>secure</code>: 可选项. 通过SSL创建时会有该项, 没有value值. 未设置此项则说明不是HTTPS.</li>
<li><code>HttpOnly</code>: 可选项. 使得Cookie的创建和修改只能通过Server发给Client的response中获得, 不可通过Javascript来操作Cookie. 此项可让网站免受XSS attacks. 未设置此项则允许Javascript操作Cookie.</li>
<li><code>SameSite=Strict/Lax</code>: 可选项. Google为阻止CSRF和XSSI所进行的实验性机制, 从Chrome Dev 51.0.2704.4开始实行.</li>
</ul>
<h3 id="2-2-Compatibility"><a href="#2-2-Compatibility" class="headerlink" title="2.2 Compatibility"></a>2.2 Compatibility</h3><table>
<thead>
<tr>
<th>Feature</th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>IE</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<td>Basic Support</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td>Max-Age</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>8.0</td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td>HttpOnly</td>
<td>1.0</td>
<td>YES</td>
<td>3.0</td>
<td>9.0</td>
<td>11</td>
<td>5.0</td>
</tr>
<tr>
<td>Cookie prefixes</td>
<td>49</td>
<td>YES</td>
<td>50</td>
<td>?</td>
<td>36</td>
<td>YES</td>
</tr>
<tr>
<td>SameSite</td>
<td>51</td>
<td>No support</td>
<td>No support</td>
<td>No support</td>
<td>39</td>
<td>No support</td>
</tr>
</tbody></table>
<h2 id="3-Version-1"><a href="#3-Version-1" class="headerlink" title="3. Version 1"></a>3. Version 1</h2><h3 id="3-1-Syntax"><a href="#3-1-Syntax" class="headerlink" title="3.1 Syntax"></a>3.1 Syntax</h3><p>RFC6265中明确指出Set-Cookie2已被废弃.</p>
<ul>
<li><code>&lt;cookie-name&gt;=&lt;cookie-value&gt;</code></li>
<li><code>Comment=&lt;value&gt;</code>: 可选项. 标明此Cookie的用途, Client可通过此项决定是否使用该Cookie.</li>
<li><code>Discard</code>: 可选项. 是否在会话结束后丢弃此Cookie.</li>
<li><code>Domain=&lt;domain-value&gt;</code></li>
<li><code>Max-Age=&lt;non-zero-digit&gt;</code></li>
<li><code>Path=&lt;path-value&gt;</code></li>
<li><code>Port=&lt;port-number&gt;</code>: 可选项. 决定某些端口下携带该Cookie的Request可以发送给Server. 可选择多个端口, 逗号分开.</li>
<li><code>Secure</code></li>
<li><code>Version=&lt;version-number&gt;</code></li>
</ul>
<h3 id="3-2-Compatibility"><a href="#3-2-Compatibility" class="headerlink" title="3.2 Compatibility"></a>3.2 Compatibility</h3><table>
<thead>
<tr>
<th>Feature</th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>IE</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<td>Set-Cookie2</td>
<td>No support</td>
<td>No support</td>
<td>No support</td>
<td>No support</td>
<td>No support</td>
<td>No support</td>
</tr>
</tbody></table>
<h2 id="4-Cookie的注意事项"><a href="#4-Cookie的注意事项" class="headerlink" title="4. Cookie的注意事项"></a>4. Cookie的注意事项</h2><h3 id="4-1-cookie-name和cookie-value的规则"><a href="#4-1-cookie-name和cookie-value的规则" class="headerlink" title="4.1 cookie-name和cookie-value的规则"></a>4.1 cookie-name和cookie-value的规则</h3><ol>
<li>cookie-name不能包含的字符: 控制字符(CTLs, 例如:<code>LF CR DEL BS BEL</code>)和分隔字符(separator character, 如<code>( ) &lt; &gt; @ , ; : \ &quot; /  [ ] ? = &#123; &#125;</code>)</li>
<li>cookie-value需写在<code>&quot;&quot;</code>中, 内容可为任何ASCII字符, 除了<code>CTLs whitespace &quot;&quot; , ; \</code></li>
<li>RFC中并没有点明cookie-name和cookie-value是否需要经过URL编码, 但通常情况下都会对其进行URL编码</li>
<li>一个Set-Cookie中只能有一对<code>cookie-name=cookie-value</code>, 一个Response中可有多个Set-Cookie</li>
</ol>
<h3 id="4-2-domain的匹配问题"><a href="#4-2-domain的匹配问题" class="headerlink" title="4.2 domain的匹配问题"></a>4.2 domain的匹配问题</h3><ol>
<li>若cookie中domain没有包含Server的域名, 那么user agent会拒绝 该cookie</li>
<li>若cookie中不含有domain, 则request的domain为cookie的domain</li>
<li>domain与request中的URL的匹配规则(RFC6265)如下:<ol>
<li>Request中的URL必须是一个host name(不能为ip地址)</li>
<li>Domain应为request中URL的一个后缀</li>
<li>Request中URL的最后一个字符可以为<code>.</code>, 但domain不能</li>
<li>若domain以<code>.</code>开头, 则匹配时将忽略这个<code>.</code></li>
</ol>
</li>
</ol>
<h3 id="4-3-Cookie-prefixes-Host-和-Secure"><a href="#4-3-Cookie-prefixes-Host-和-Secure" class="headerlink" title="4.3 Cookie prefixes: __Host-和__Secure-"></a>4.3 Cookie prefixes: __Host-和__Secure-</h3><p>在如下条件下, Set-Cookie的cookie-name的前缀可以设置为<code>__Host-</code>和<code>__Secure-</code>的前缀</p>
<ul>
<li>连接方式为HTTPS, 且必须设置secure</li>
<li><code>__Host-</code>前缀必须包含<code>path=/</code>, 且不能有domain</li>
</ul>
<p>以下是Set-Cookie样例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-Cookie: __Secure-ID=123; Secure; Domain=example.com</span><br><span class="line">Set-Cookie: __Host-ID=123; Secure; Path=/</span><br></pre></td></tr></table></figure>

<h3 id="4-4-SameSite机制"><a href="#4-4-SameSite机制" class="headerlink" title="4.4 SameSite机制"></a>4.4 SameSite机制</h3><p>SameSite的value可二选一: Strict或Lax</p>
<ul>
<li>Strict<br>最严格的防护机制. 所有跨域的Request都将不会携带原本的cookie信息. 假设Client从a.com获得如下cookie:<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-Cookie: id1=1; SameSite=Strict</span><br><span class="line">Set-Cookie: id2=2</span><br></pre></td></tr></table></figure>
当Client在b.com发起对a.com的请求时, id1将不会包含在Cookie请求部分中.</li>
<li>Lax<br>宽松模式. 在上述情况中, 如果跨域请求为GET请求, 则不会限制Cookie; 如果为POST请求则不会传递Cookie信息. 假设Client从a.com获得如下cookie:<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-Cookie: id1=1; SameSite=Strict</span><br><span class="line">Set-Cookie: id2=2; SameSite=Lax</span><br><span class="line">Set-Cookie: id3=3</span><br></pre></td></tr></table></figure>
当Client在b.com发起对a.com的POST请求时, 只有id3会包含到Cookie的请求部分中; 如果发起的是GET请求, 则id2和id3都会包含到Cookie的请求部分中.</li>
</ul>
<h3 id="4-5-Cookie的个数限制和大小限制"><a href="#4-5-Cookie的个数限制和大小限制" class="headerlink" title="4.5 Cookie的个数限制和大小限制"></a>4.5 Cookie的个数限制和大小限制</h3><p>各个浏览器对于单个domain下能存储多少个cookie和单个cookie的最大字节都有所不同, 以下是不权威统计:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Chrome8-*</th>
<th>Firefox24-*</th>
<th>IE6-7</th>
<th>IE8-11</th>
<th>Opera26</th>
<th>Safari7-*</th>
</tr>
</thead>
<tbody><tr>
<td>Max Cookies</td>
<td>180</td>
<td>150</td>
<td>50</td>
<td>50</td>
<td>180</td>
<td>N&#x2F;A</td>
</tr>
<tr>
<td>Max Size per Cookie(byte)</td>
<td>4096</td>
<td>4097</td>
<td>4095</td>
<td>5117</td>
<td>4096</td>
<td>4096</td>
</tr>
</tbody></table>
<p>可以发现Safari没有限制单个domain的cookie数量, 假设我们载入1k个cookie, 每个cookie大小为4k, 那么下一次对于该domain发送的request大小将大于<code>1k*4k</code>. 如此大的header size将导致溢出错误, Server将返回HTTP Status Code: 413.</p>
<h2 id="5-实例"><a href="#5-实例" class="headerlink" title="5. 实例"></a>5. 实例</h2><p>打开一个小型网站,可以发现首次访问时就加载了7个Cookie文件</p>
<h3 id="5-1-从网页加载完毕后domain归属来看"><a href="#5-1-从网页加载完毕后domain归属来看" class="headerlink" title="5.1 从网页加载完毕后domain归属来看:"></a>5.1 从网页加载完毕后domain归属来看:</h3><ul>
<li>hm.baidu.com<ul>
<li>HMACCOUNT</li>
</ul>
</li>
<li>yiibai.com<ul>
<li>Hm_lpvt_424e222704e2274e37a8169110e6e00a</li>
<li>Hm_lvt_424e222704e2274e37a8169110e6e00a</li>
<li>UM_distinctid</li>
</ul>
</li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.yiibai.com/">www.yiibai.com</a><ul>
<li>CNZZDATA4255568</li>
<li>PHPSESSID</li>
<li>_cnzz_CV</li>
</ul>
</li>
</ul>
<h3 id="5-2从加载顺序来看"><a href="#5-2从加载顺序来看" class="headerlink" title="5.2从加载顺序来看:"></a>5.2从加载顺序来看:</h3><ol>
<li><p>通过请求<code>http://www.yiibai.com/</code>的Response中Set-Cookie创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-Cookie:PHPSESSID=f3b6rccd299lkek5o4lk55lek4; path=/</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过请求<code>https://hm.baidu.com/hm.js?424e222704e2274e37a8169110e6e00a</code>的Response中Set-Cookie项创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-Cookie:HMACCOUNT=4EECAAF636090065; Path=/; Domain=hm.baidu.com; Expires=Sun, 18 Jan 2038 00:00:00 GMT</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过上一步请求的hm.js创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Hm_lpvt_424e222704e2274e37a8169110e6e00a</span><br><span class="line">Hm_lvt_424e222704e2274e37a8169110e6e00a</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  hm.baidu.com/hm.js中的简略代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// cookie的Name部分</span></span><br><span class="line">c = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;424e222704e2274e37a8169110e6e00a&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">31536000000</span>,   <span class="comment">//cookie的Expires部分, 一年</span></span><br><span class="line">&#125;</span><br><span class="line">b.<span class="property">p</span> = <span class="variable language_">this</span>.<span class="title function_">getData</span>(<span class="string">&quot;Hm_lpvt_&quot;</span> + c.<span class="property">id</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// cookie的Content部分</span></span><br><span class="line">h.<span class="property">w</span> = &#123;</span><br><span class="line">    <span class="attr">k</span>: <span class="title class_">Math</span>.<span class="title function_">round</span>( + <span class="keyword">new</span> <span class="title class_">Date</span> / <span class="number">1E3</span>) <span class="comment">// UNIX timestamp</span></span><br><span class="line">&#125;</span><br><span class="line">b = h.<span class="property">w</span></span><br><span class="line">e = b.<span class="property">k</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// cookie载入的function</span></span><br><span class="line">mt = &#123;&#125;</span><br><span class="line">mt.<span class="property">cookie</span> = &#123;&#125;;</span><br><span class="line">mt.<span class="property">cookie</span>.<span class="property">set</span> = <span class="keyword">function</span>(<span class="params">a, d, g</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e;</span><br><span class="line">    g.<span class="property">J</span> &amp;&amp; (e = <span class="keyword">new</span> <span class="title class_">Date</span>, e.<span class="title function_">setTime</span>(e.<span class="title function_">getTime</span>() + g.<span class="property">J</span>));</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">cookie</span> = a + <span class="string">&quot;=&quot;</span> + d + (g.<span class="property">domain</span> ? <span class="string">&quot;; domain=&quot;</span> + g.<span class="property">domain</span>: <span class="string">&quot;&quot;</span>) + (g.<span class="property">path</span> ? <span class="string">&quot;; path=&quot;</span> + g.<span class="property">path</span>: <span class="string">&quot;&quot;</span>) + (e ? <span class="string">&quot;; expires=&quot;</span> + e.<span class="title function_">toGMTString</span>() : <span class="string">&quot;&quot;</span>) + (g.<span class="property">cb</span> ? <span class="string">&quot;; secure&quot;</span>: <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// cookie载入function的包装</span></span><br><span class="line"><span class="attr">K</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">hostname</span>,</span><br><span class="line">    b = <span class="number">0</span>,</span><br><span class="line">    d = c.<span class="property">dm</span>.<span class="property">length</span>; b &lt; d; b++) <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">M</span>(a, c.<span class="property">dm</span>[b])) <span class="keyword">return</span> c.<span class="property">dm</span>[b].<span class="title function_">replace</span>(<span class="regexp">/(:\d+)?[\/\?#].*/</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">U</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="number">0</span>,</span><br><span class="line">    b = c.<span class="property">dm</span>.<span class="property">length</span>; a &lt; b; a++) &#123;</span><br><span class="line">        <span class="keyword">var</span> d = c.<span class="property">dm</span>[a];</span><br><span class="line">        <span class="keyword">if</span> ( - <span class="number">1</span> &lt; d.<span class="title function_">indexOf</span>(<span class="string">&quot;/&quot;</span>) &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">Z</span>(<span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">href</span>, d)) <span class="keyword">return</span> d.<span class="title function_">replace</span>(<span class="regexp">/^[^\/]+(\/.*)/</span>, <span class="string">&quot;$1&quot;</span>) + <span class="string">&quot;/&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">l = mt.<span class="property">cookie</span></span><br><span class="line"><span class="attr">setData</span>: <span class="keyword">function</span>(<span class="params">a, b, d</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        l.<span class="title function_">set</span>(a, b, &#123;</span><br><span class="line">            <span class="attr">domain</span>: <span class="variable language_">this</span>.<span class="title function_">K</span>(),</span><br><span class="line">            <span class="attr">path</span>: <span class="variable language_">this</span>.<span class="title function_">U</span>(),</span><br><span class="line">            <span class="attr">J</span>: d</span><br><span class="line">        &#125;),</span><br><span class="line">        d ? p.<span class="title function_">set</span>(a, b, d) : f.<span class="title function_">set</span>(a, b)</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 运行setData</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(<span class="string">&quot;Hm_lvt_&quot;</span> + c.<span class="property">id</span>, e, c.<span class="property">age</span>); <span class="comment">// expires为一年</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(<span class="string">&quot;Hm_lpvt_&quot;</span> + c.<span class="property">id</span>, b.<span class="property">k</span>); <span class="comment">// 未设置expires, 默认生存周期为整个会话</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>通过请求<code>http://s23.cnzz.com/stat.php?id=4255568</code>的Response中js创建CNZZDATA4255568, _cnzz_CV和UM_distinctid<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  c.cnzz.com/core.php中的简略代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Cookie的Name部分</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">k</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">c</span> = <span class="string">&quot;4255568&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ca</span> = <span class="string">&quot;z&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">Z</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">W</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">Y</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">C</span> = <span class="string">&quot;1494887098&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">aa</span> = <span class="string">&quot;hzs23.cnzz.com&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">X</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">G</span> = <span class="string">&quot;CNZZDATA&quot;</span> + <span class="variable language_">this</span>.<span class="property">c</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">F</span> = <span class="string">&quot;_CNZZDbridge_&quot;</span> + <span class="variable language_">this</span>.<span class="property">c</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">P</span> = <span class="string">&quot;_cnzz_CV&quot;</span> + <span class="variable language_">this</span>.<span class="property">c</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">R</span> = <span class="string">&quot;CZ_UUID&quot;</span> + <span class="variable language_">this</span>.<span class="property">c</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">L</span> = <span class="string">&quot;UM_distinctid&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">H</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">K</span> = &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title class_">Aa</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// cookie载入的function</span></span><br><span class="line"><span class="keyword">var</span> h = <span class="variable language_">document</span>,</span><br><span class="line"><span class="attr">ba</span>: <span class="keyword">function</span>(<span class="params">a, b, c, d, e, g</span>) &#123;</span><br><span class="line">    a = <span class="title function_">f</span>(a) + <span class="string">&quot;=&quot;</span> + <span class="title function_">f</span>(b);</span><br><span class="line">    c <span class="keyword">instanceof</span> <span class="title class_">Date</span> &amp;&amp; (a += <span class="string">&quot;; expires=&quot;</span> + c.<span class="title function_">toGMTString</span>());</span><br><span class="line">    d &amp;&amp; (a += <span class="string">&quot;; path=&quot;</span> + d);</span><br><span class="line">    e &amp;&amp; (a += <span class="string">&quot;; domain=&quot;</span> + e);</span><br><span class="line">    g &amp;&amp; (a += <span class="string">&quot;; secure&quot;</span>);</span><br><span class="line">    h.<span class="property">cookie</span> = a</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// CNZZDATA4255568的载入function</span></span><br><span class="line"><span class="attr">$</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="variable language_">this</span>.<span class="property">G</span> + <span class="string">&quot;=&quot;</span>,</span><br><span class="line">        b = [],</span><br><span class="line">        c = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line">        c.<span class="title function_">setTime</span>(c.<span class="title function_">getTime</span>() + <span class="number">157248E5</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1E8</span> &lt; <span class="variable language_">this</span>.<span class="property">c</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;none&quot;</span> !== <span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">l</span>) </span><br><span class="line">                b.<span class="title function_">push</span>(<span class="title function_">f</span>(<span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">l</span>));</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> d = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">2147483648</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">C</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="title function_">N</span>(<span class="variable language_">this</span>.<span class="title function_">o</span>());</span><br><span class="line">                b.<span class="title function_">push</span>(<span class="title function_">f</span>(d))</span><br><span class="line">            &#125;</span><br><span class="line">            b.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">C</span>);</span><br><span class="line">            <span class="number">0</span> &lt; b.<span class="property">length</span> ? (a += <span class="title function_">f</span>(b.<span class="title function_">join</span>(<span class="string">&quot;|&quot;</span>)), a += <span class="string">&quot;; expires=&quot;</span> + c.<span class="title function_">toUTCString</span>(), a += <span class="string">&quot;; path=/&quot;</span>) : a += <span class="string">&quot;; expires=&quot;</span> + (<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">0</span>)).<span class="title function_">toUTCString</span>()</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="string">&quot;none&quot;</span> !== <span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">l</span> ? b.<span class="title function_">push</span>(<span class="string">&quot;cnzz_eid=&quot;</span> + <span class="title function_">f</span>(<span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">l</span>)) : (d = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">2147483648</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="property">C</span> + <span class="string">&quot;-&quot;</span> + <span class="variable language_">this</span>.<span class="title function_">N</span>(<span class="variable language_">this</span>.<span class="title function_">o</span>()), b.<span class="title function_">push</span>(<span class="string">&quot;cnzz_eid=&quot;</span> + <span class="title function_">f</span>(d))),</span><br><span class="line">        b.<span class="title function_">push</span>(<span class="string">&quot;ntime=&quot;</span> + <span class="variable language_">this</span>.<span class="property">C</span>),</span><br><span class="line">        <span class="number">0</span> &lt; b.<span class="property">length</span> ? (a += <span class="title function_">f</span>(b.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>)), a += <span class="string">&quot;; expires=&quot;</span> + c.<span class="title function_">toUTCString</span>(), a += <span class="string">&quot;; path=/&quot;</span>) : a += <span class="string">&quot;; expires=&quot;</span> + (<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">0</span>)).<span class="title function_">toUTCString</span>();</span><br><span class="line">        h.<span class="property">cookie</span> = a</span><br><span class="line">    &#125; <span class="keyword">catch</span>(l) &#123;</span><br><span class="line">        <span class="title function_">g</span>(l, <span class="string">&quot;sS failed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// _cnzz_CV的载入function</span></span><br><span class="line"><span class="attr">I</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a = [],</span><br><span class="line">        b,</span><br><span class="line">        c,</span><br><span class="line">        d;</span><br><span class="line">        <span class="keyword">for</span> (d <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">b</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> l = [];</span><br><span class="line">            l.<span class="title function_">push</span>(d);</span><br><span class="line">            l.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">b</span>[d].<span class="property">da</span>);</span><br><span class="line">            l.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">b</span>[d].<span class="property">h</span>);</span><br><span class="line">            b = l.<span class="title function_">join</span>(<span class="string">&quot;|&quot;</span>);</span><br><span class="line">            a.<span class="title function_">push</span>(b)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!a.<span class="property">length</span>) <span class="keyword">return</span> ! <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line">        e.<span class="title function_">setTime</span>(e.<span class="title function_">getTime</span>() + <span class="number">157248E5</span>);</span><br><span class="line">        c = <span class="variable language_">this</span>.<span class="property">P</span> + <span class="string">&quot;=&quot;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">b</span> = <span class="title function_">f</span>(a.<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>));</span><br><span class="line">        c += <span class="variable language_">this</span>.<span class="property">b</span>;</span><br><span class="line">        c += <span class="string">&quot;; expires=&quot;</span> + e.<span class="title function_">toUTCString</span>();</span><br><span class="line">        h.<span class="property">cookie</span> = c + <span class="string">&quot;; path=/&quot;</span></span><br><span class="line">    &#125; <span class="keyword">catch</span>(t) &#123;</span><br><span class="line">        <span class="title function_">g</span>(t, <span class="string">&quot;sCV failed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// UM_distinctid的载入function</span></span><br><span class="line"><span class="attr">za</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="variable language_">this</span>.<span class="property">a</span>,</span><br><span class="line">        b;</span><br><span class="line">        <span class="keyword">if</span> (! (b = <span class="variable language_">this</span>.<span class="title function_">m</span>(<span class="variable language_">this</span>.<span class="property">L</span>))) &#123;</span><br><span class="line">            <span class="keyword">var</span> c = <span class="variable language_">this</span>.<span class="title function_">fa</span>(),</span><br><span class="line">            d = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line">            d.<span class="title function_">setTime</span>(d.<span class="title function_">getTime</span>() + <span class="number">157248E5</span>);</span><br><span class="line">            <span class="keyword">var</span> e = <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">hostname</span>.<span class="title function_">match</span>(<span class="regexp">/[a-z0-9][a-z0-9\-]+\.[a-z\.]&#123;2,6&#125;$/i</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">ba</span>(<span class="variable language_">this</span>.<span class="property">L</span>, c, d, <span class="string">&quot;/&quot;</span>, e ? e[<span class="number">0</span>] : <span class="string">&quot;&quot;</span>);</span><br><span class="line">            b = c</span><br><span class="line">        &#125;</span><br><span class="line">        a.<span class="property">S</span> = b;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span>.<span class="property">S</span></span><br><span class="line">    &#125; <span class="keyword">catch</span>(n) &#123;</span><br><span class="line">        <span class="title function_">g</span>(n, <span class="string">&quot;gC failed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-Chrome的Cookie存储"><a href="#6-Chrome的Cookie存储" class="headerlink" title="6. Chrome的Cookie存储"></a>6. Chrome的Cookie存储</h2><p>Chrome将Cookie信息存储到SQLite format 3的Database File Format, database的schema如下:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cookies (</span><br><span class="line">    creation_utc <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    host_key TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    name TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">value</span> TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    path TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    expires_utc <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    secure <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    httponly <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    last_access_utc <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">    has_expires <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>, </span><br><span class="line">    persistent <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">    priority <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">    encrypted_value <span class="type">BLOB</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    firstpartyonly <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>以下是浏览页面产生的Cookie内容</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sqlite<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cookies <span class="keyword">where</span> host_key<span class="operator">=</span>&quot;.yiibai.com&quot;;</span><br><span class="line"><span class="number">13139364398577396</span><span class="operator">|</span>.yiibai.com<span class="operator">|</span>UM_distinctid<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">13155089198000000</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139367892467768</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br><span class="line"><span class="number">13139364398726940</span><span class="operator">|</span>.yiibai.com<span class="operator">|</span>Hm_lvt_424e222704e2274e37a8169110e6e00a<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">13170900398000000</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139367892467768</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br><span class="line"><span class="number">13139364398727344</span><span class="operator">|</span>.yiibai.com<span class="operator">|</span>Hm_lpvt_424e222704e2274e37a8169110e6e00a<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139367892467768</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line">sqlite<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cookies <span class="keyword">where</span> host_key<span class="operator">=</span>&quot;www.yiibai.com&quot;;</span><br><span class="line"><span class="number">13139364397109878</span><span class="operator">|</span>www.yiibai.com<span class="operator">|</span>PHPSESSID<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139367892467768</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br><span class="line"><span class="number">13139364398579199</span><span class="operator">|</span>www.yiibai.com<span class="operator">|</span>CNZZDATA4255568<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">13155089198000000</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139367892467768</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line">sqlite<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cookies <span class="keyword">where</span> host_key<span class="operator">=</span>&quot;.hm.baidu.com&quot;;</span><br><span class="line"><span class="number">13139365567933820</span><span class="operator">|</span>.hm.baidu.com<span class="operator">|</span>HMACCOUNT<span class="operator">||</span><span class="operator">/</span><span class="operator">|</span><span class="number">13791859272933820</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">0</span><span class="operator">|</span><span class="number">13139379872902982</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span><span class="number">1</span><span class="operator">|</span> <span class="operator">|</span><span class="number">0</span></span><br></pre></td></tr></table></figure>

    </div>

    <footer class="post-footer">
      
      <div class="post-tags">
        
          <a href="/tags/Network/">Network</a>
        
      </div>
      

      
      
  <nav class="post-nav">
    
      <a class="prev" href="/p/4513.html">
        <i class="icon-left"></i>
        <span class="prev-text nav-default">Markdown</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/p/9a67.html">
        <span class="next-text nav-default">Memory Management</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="icon-right"></i>
      </a>
    
  </nav>

      
    </footer>
  </article>

  </div>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    showProcessingMessages: true,
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: false,
        skipTags: ["script","noscript","style","textarea"]
    },
    TeX: {
        Macros:{
            Arr: ["\\{ #1 \\}", 1],
            fi: "{f\\,\\!_i}",
            SS: ["{#1\\:\\!_#2}",2],
            SUBx: ["{\\:\\!_#1}",1],
            EXPx: ["{\\;\\!^#1}",1],
            Ss: ["{#1\\,\\!_#2}",2],
            subx: ["{\\,\\!_#1}",1]
        }
    }
});
</script>


      </div>
    </div>

    
<script type="text/javascript">
  var disqus_shortname = 'zaf1ro';
  var disqus_identifier = 'p/4958.html';
  var disqus_title = "Cookie";

  var disqus = {
    load : function disqus(){
        if(typeof DISQUS !== 'object') {
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
          $('#load-disqus').remove(); ///加载后移除按钮
        }
    }
  }

  
    var disqus_config = function () {
        this.page.url = disqus_url;
        this.page.identifier = disqus_identifier;
        this.page.title = disqus_title;
    };
  

</script>



    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.6.0.min.js"></script>
  

  

    
    <script type="text/javascript">
(function(){"use strict";var Theme={};Theme.backToTop={register:function(){var $backToTop=$('#back-to-top');$(window).scroll(function(){if($(window).scrollTop()>100){$backToTop.fadeIn(1000)}else{$backToTop.fadeOut(1000)}});$backToTop.click(function(){$('body').animate({scrollTop:0})})}};Theme.fancybox={register:function(){if($.fancybox){$('.post').each(function(){$(this).find('img').each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})});$('.fancybox').fancybox({openEffect:'elastic',closeEffect:'elastic'})}}};this.Theme=Theme}.call(this));
</script>

<script type="text/javascript">
$(document).ready(function(){if(themeConfig.fancybox.enable){Theme.fancybox.register()}Theme.backToTop.register()});
</script>
    
<script type="text/javascript">
var themeConfig = {
  fancybox: {
    enable: false
  },
};
</script>

    <script>
    $('table').wrap('<div style="overflow-x: auto;"></div>');
</script>
    
    <script>
$(document).ready(function () {
    $('#sidebarCollapse').on('click', function(){
        $('#sidebar').toggleClass('active');
    });

    $('#toc ol li a').on('click', function(){
        $('#sidebar').toggleClass('active');
    });
});
</script>
  </body>
</html>
