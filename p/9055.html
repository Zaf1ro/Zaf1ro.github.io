<!DOCTYPE html>
<html lang="zh">
  <head>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



  <meta name="description" content="Trie"/>




  <meta name="keywords" content="Algorithm," />


<meta name="google-site-verification" content="qy4gf0StWj627u-7aIP3WDCLBi3jPYXhm57UC7TUcok" />
<meta name="baidu-site-verification" content="XJoPG7ad2Z" />

<link rel="alternate" hreflang="x-default" href="https://zaf1ro.github.io/p/9055.html" />
<link rel="alternate" hreflang="zh" href="https://zaf1ro.github.io/p/9055.html" />




  <link rel="alternate" href="/default" title="Zaf1ro" >




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.jpeg?v=1.1" />



<link rel="canonical" href="https://zaf1ro.github.io/p/9055.html"/>


<meta name="description" content="1. IntroductionTrie tree(字典树)也称为prefix tree或digital tree, 作为一种k元搜索树, 用于在集合中搜索特定键的树型结构. 使用trie时, 搜索的键通常为字符串, 但trie中节点内存储的并不是整个字符串, 而是单个字符, 因此访问键时需深度优先遍历多个节点. 与binary search tree(BST, 二叉搜索树)最大的区别就是节点内存储">
<meta property="og:type" content="article">
<meta property="og:title" content="Trie">
<meta property="og:url" content="https://zaf1ro.github.io/p/9055.html">
<meta property="og:site_name" content="Zaf1ro">
<meta property="og:description" content="1. IntroductionTrie tree(字典树)也称为prefix tree或digital tree, 作为一种k元搜索树, 用于在集合中搜索特定键的树型结构. 使用trie时, 搜索的键通常为字符串, 但trie中节点内存储的并不是整个字符串, 而是单个字符, 因此访问键时需深度优先遍历多个节点. 与binary search tree(BST, 二叉搜索树)最大的区别就是节点内存储">
<meta property="og:locale">
<meta property="article:published_time" content="2023-08-02T17:03:18.000Z">
<meta property="article:modified_time" content="2024-08-20T16:43:04.028Z">
<meta property="article:tag" content="Algorithm">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />




    <title>
Trie - Zaf1ro
</title>
  <meta name="generator" content="Hexo 6.3.0"></head>

  <body>
  <nav id="sidebar" class="active on-post">
    <div id="third">
      <div id="sidebar-title">
        <h1 id="sidebar-title-text">
            <a href="/." class="logo">Home</a>
        </h1>
      </div>
      <div id="google-search">
  <script async src="https://cse.google.com/cse.js?cx=009060789867951546370:v3hkcobeuh9"></script>
  <div class="gcse-search"></div>
</div>
      
  <div id="toc">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Introduction"><span class="toc-text">1. Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#440-K-th-Smallest-in-Lexicographical-Order"><span class="toc-text">440. K-th Smallest in Lexicographical Order</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trie"><span class="toc-text">Trie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2227-Encrypt-and-Decrypt-Strings"><span class="toc-text">2227. Encrypt and Decrypt Strings</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trie-1"><span class="toc-text">Trie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1032-Stream-of-Characters"><span class="toc-text">1032. Stream of Characters</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trie-2"><span class="toc-text">Trie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#588-Design-In-Memory-File-System"><span class="toc-text">588. Design In-Memory File System</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trie-3"><span class="toc-text">Trie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#140-Word-Break-II"><span class="toc-text">140. Word Break II</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trie-4"><span class="toc-text">Trie</span></a></li></ol></li></ol>
  </div>

    </div>
  </nav>

    <div id="page">
      <header id="masthead"><div class="site-header-inner">
  
  <button class="nav-mobile-button on-post" id="sidebarCollapse">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/></svg>
  </button>
  
  


  <nav id="nav-top">
    
      
      <ul id="menu-top" class="nav-top-items on-post">
      
        
          <li class="menu-item">
            <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zaf1ro">
              
              
                Github
              
            </a>
          </li>
        
      </ul>
    
  </nav>
</div>

      </header>
      <div id="content">
        
  <div class="primary">
    
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Trie
        
      </h1>
      <time class="post-time">
          08/02/23
      </time>
    </header>

    <div class="post-content">
      <h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>Trie tree(字典树)也称为prefix tree或digital tree, 作为一种k元搜索树, 用于在集合中搜索特定键的树型结构. 使用trie时, 搜索的键通常为字符串, 但trie中节点内存储的并不是整个字符串, 而是单个字符, 因此访问键时需深度优先遍历多个节点. 与binary search tree(BST, 二叉搜索树)最大的区别就是节点内存储的数据:</p>
<ul>
<li>BST会将完整的单个键放入一个节点中</li>
<li>Trie值会将每个键的值分布到整个数据结构中</li>
</ul>
<p>Trie中所有子节点都与其父节点相关联, 且键不一定为字符串, 也可以是二进制或十进制数字. Trie的查找复杂度与键大小成正比, 以下是时间复杂度:</p>
<ul>
<li>Search: $O(n)$</li>
<li>Insert: $O(n)$</li>
<li>Delete: $O(n)$</li>
</ul>
<h2 id="440-K-th-Smallest-in-Lexicographical-Order"><a href="#440-K-th-Smallest-in-Lexicographical-Order" class="headerlink" title="440. K-th Smallest in Lexicographical Order"></a>440. K-th Smallest in Lexicographical Order</h2><p>Given two integers <code>n</code> and <code>k</code>, return the <code>$k^&#123;th&#125;$</code> lexicographically smallest integer in the range <code>[1, n]</code>.</p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: n = 13, k = 2</span><br><span class="line">Output: 10</span><br><span class="line">Explanation: The lexicographical order is [1, 10, 11, 12, 13, 2, 3, 4, 5, 6, 7, 8, 9], so the second smallest number is 10.</span><br></pre></td></tr></table></figure>

<h3 id="Trie"><a href="#Trie" class="headerlink" title="Trie"></a>Trie</h3><p>题目要求找到字典序第k小的数字, 因此可将所有数字转换为字符串, 并排序找到第k小的数字即可, 但这么做时间复杂度和空间复杂度都不符合要求, 因此可利用trie的特性对所有数字重建, 例如: 1的子节点代表<code>[10, 19]</code>中的所有数字, 而10的子节点代表<code>[100, 109]</code>中的所有数字. 可以发现, 字典序第k个数字即为trie中前序遍历的第k个节点. 假设第k小的节点及其子节点共有<code>$\text&#123;step&#125;_i$</code>个节点, 此时存在两种可能:</p>
<ul>
<li>$\text{step}_i \le k - i$: 第k小的节点一定不存在于第i小的节点及其子树</li>
<li>$\text{step}_i \gt k - i$: 第k小的节点一定在第i小的节点及其子树中</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKthNumber</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        --k;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">step</span> <span class="operator">=</span> helper(num, n);</span><br><span class="line">            <span class="keyword">if</span> (step &lt;= k) &#123;</span><br><span class="line">                ++num;</span><br><span class="line">                k -= step;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                num *= <span class="number">10</span>;</span><br><span class="line">                --k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">helper</span><span class="params">(<span class="type">int</span> num, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">first</span> <span class="operator">=</span> num, last = first, step = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (first &lt;= n) &#123;</span><br><span class="line">            step += Math.min(n, last) - first + <span class="number">1</span>;</span><br><span class="line">            first *= <span class="number">10</span>;</span><br><span class="line">            last = last * <span class="number">10</span> + <span class="number">9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)step;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="2227-Encrypt-and-Decrypt-Strings"><a href="#2227-Encrypt-and-Decrypt-Strings" class="headerlink" title="2227. Encrypt and Decrypt Strings"></a>2227. Encrypt and Decrypt Strings</h2><p>You are given a character array <code>keys</code> containing <strong>unique</strong> characters and a string array values containing strings of length 2. You are also given another string array <code>dictionary</code> that contains all permitted original strings after decryption. You should implement a data structure that can encrypt or decrypt a <strong>0-indexed</strong> string.</p>
<p>A string is encrypted with the following process:</p>
<ol>
<li>For each character <code>c</code> in the string, we find the index <code>i</code> satisfying <code>keys[i] == c</code> in <code>keys</code></li>
<li>Replace <code>c</code> with <code>values[i]</code> in the string</li>
</ol>
<p>Note that in case a character of the string is <strong>not present</strong> in <code>keys</code>, the encryption process cannot be carried out, and an empty string <code>&quot;&quot;</code> is returned.</p>
<p>A string is <strong>decrypted</strong> with the following process:</p>
<ol>
<li>For each substring <code>s</code> of length 2 occurring at an even index in the string, we find an <code>i</code> such that <code>values[i] == s</code>. If there are multiple valid <code>i</code>, we choose <strong>any</strong> one of them. This means a string could have multiple possible strings it can decrypt to.</li>
<li>Replace s with <code>keys[i]</code> in the string.</li>
</ol>
<p>Implement the <code>Encrypter</code> class:</p>
<ul>
<li><code>Encrypter(char[] keys, String[] values, String[] dictionary)</code> Initializes the <code>Encrypter</code> class with <code>keys</code>, <code>values</code>, and <code>dictionary</code>.</li>
<li><code>String encrypt(String word1)</code> Encrypts <code>word1</code> with the encryption process described above and returns the encrypted string.</li>
<li><code>int decrypt(String word2)</code> Returns the number of possible strings <code>word2</code> could decrypt to that also appear in <code>dictionary</code>.</li>
</ul>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">[&quot;Encrypter&quot;, &quot;encrypt&quot;, &quot;decrypt&quot;]</span><br><span class="line">[</span><br><span class="line">    [[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;], [&quot;ei&quot;, &quot;zf&quot;, &quot;ei&quot;, &quot;am&quot;], [&quot;abcd&quot;, &quot;acbd&quot;, &quot;adbc&quot;, &quot;badc&quot;, &quot;dacb&quot;, &quot;cadb&quot;, &quot;cbda&quot;, &quot;abad&quot;]],</span><br><span class="line">    [&quot;abcd&quot;],</span><br><span class="line">    [&quot;eizfeiam&quot;]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">[null, &quot;eizfeiam&quot;, 2]</span><br><span class="line"></span><br><span class="line">Explanation:</span><br><span class="line">/** </span><br><span class="line"> * return &quot;eizfeiam&quot;. </span><br><span class="line"> * &#x27;a&#x27; maps to &quot;ei&quot;, &#x27;b&#x27; maps to &quot;zf&quot;, &#x27;c&#x27; maps to &quot;ei&quot;, and &#x27;d&#x27; maps to &quot;am&quot;</span><br><span class="line"> */ </span><br><span class="line">encrypter.encrypt(&quot;abcd&quot;);</span><br><span class="line">/** </span><br><span class="line"> * return 2. </span><br><span class="line"> * &quot;ei&quot; can map to &#x27;a&#x27; or &#x27;c&#x27;, &quot;zf&quot; maps to &#x27;b&#x27;, and &quot;am&quot; maps to &#x27;d&#x27;. </span><br><span class="line"> * Thus, the possible strings after decryption are &quot;abad&quot;, &quot;cbad&quot;, &quot;abcd&quot;, and &quot;cbcd&quot;. </span><br><span class="line"> * 2 of those strings, &quot;abad&quot; and &quot;abcd&quot;, appear in dictionary, so the answer is 2.</span><br><span class="line"> * /</span><br><span class="line">encrypter.decrypt(&quot;eizfeiam&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="Trie-1"><a href="#Trie-1" class="headerlink" title="Trie"></a>Trie</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Encrypter</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Node[] next;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> <span class="title function_">Node</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.next = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">26</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;Character, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addString</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c: s.toCharArray()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> c - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (t.next[m] == <span class="literal">null</span>) &#123;</span><br><span class="line">                t.next[m] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            t = t.next[m];</span><br><span class="line">        &#125;</span><br><span class="line">        ++t.count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Encrypter</span><span class="params">(<span class="type">char</span>[] keys, String[] values, String[] dictionary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">            map.put(keys[i], values[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (String s: dictionary) &#123;</span><br><span class="line">            addString(encrypt(s));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">encrypt</span><span class="params">(String word1)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c: word1.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!map.containsKey(c)) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            sb.append(map.get(c));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">decrypt</span><span class="params">(String word2)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c: word2.toCharArray()) &#123;</span><br><span class="line">            t = t.next[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="1032-Stream-of-Characters"><a href="#1032-Stream-of-Characters" class="headerlink" title="1032. Stream of Characters"></a>1032. Stream of Characters</h2><p>Design an algorithm that accepts a stream of characters and checks if a suffix of these characters is a string of a given array of strings <code>words</code>.<br>For example, if <code>words = [&quot;abc&quot;, &quot;xyz&quot;]</code> and the stream added the four characters (one by one) <code>&#39;a&#39;</code>, <code>&#39;x&#39;</code>, <code>&#39;y&#39;</code>, and <code>&#39;z&#39;</code>, your algorithm should detect that the suffix <code>&quot;xyz&quot;</code> of the characters <code>&quot;axyz&quot;</code> matches <code>&quot;xyz&quot;</code> from <code>words</code>.<br>Implement the <code>StreamChecker</code> class:</p>
<ul>
<li><code>StreamChecker(String[] words)</code> Initializes the object with the strings array <code>words</code>.</li>
<li><code>boolean query(char letter)</code> Accepts a new character from the stream and returns <code>true</code> if any non-empty suffix from the stream forms a word that is in <code>words</code>.</li>
</ul>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">[&quot;StreamChecker&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;, &quot;query&quot;]</span><br><span class="line">[</span><br><span class="line">    [[&quot;cd&quot;, &quot;f&quot;, &quot;kl&quot;]],</span><br><span class="line">    [&quot;a&quot;], [&quot;b&quot;], [&quot;c&quot;], [&quot;d&quot;], [&quot;e&quot;], [&quot;f&quot;],</span><br><span class="line">    [&quot;g&quot;], [&quot;h&quot;], [&quot;i&quot;], [&quot;j&quot;], [&quot;k&quot;], [&quot;l&quot;]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">[null, false, false, false, true, false, true, false, false, false, false, false, true]</span><br><span class="line"></span><br><span class="line">Explanation:</span><br><span class="line">StreamChecker streamChecker = new StreamChecker([&quot;cd&quot;, &quot;f&quot;, &quot;kl&quot;]);</span><br><span class="line">streamChecker.query(&quot;a&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;b&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;c&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;d&quot;); // return True, because &#x27;cd&#x27; is in the wordlist</span><br><span class="line">streamChecker.query(&quot;e&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;f&quot;); // return True, because &#x27;f&#x27; is in the wordlist</span><br><span class="line">streamChecker.query(&quot;g&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;h&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;i&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;j&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;k&quot;); // return False</span><br><span class="line">streamChecker.query(&quot;l&quot;); // return True, because &#x27;kl&#x27; is in the wordlist</span><br></pre></td></tr></table></figure>

<h3 id="Trie-2"><a href="#Trie-2" class="headerlink" title="Trie"></a>Trie</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StreamChecker</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Node[] next;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">isEnd</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.next = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">26</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StreamChecker</span><span class="params">(String[] words)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        <span class="built_in">this</span>.curr = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span> (String word: words) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> word.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> word.charAt(i) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span> (t.next[m] == <span class="literal">null</span>) &#123;</span><br><span class="line">                    t.next[m] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                t = t.next[m];</span><br><span class="line">            &#125;</span><br><span class="line">            t.isEnd = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">query</span><span class="params">(<span class="type">char</span> letter)</span> &#123;</span><br><span class="line">        sb.append(letter);</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> sb.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            t = t.next[sb.charAt(i) - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (t.isEnd) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="588-Design-In-Memory-File-System"><a href="#588-Design-In-Memory-File-System" class="headerlink" title="588. Design In-Memory File System"></a>588. Design In-Memory File System</h2><p>Design a data structure that simulates an in-memory file system.</p>
<p>Implement the FileSystem class:</p>
<ul>
<li><code>FileSystem()</code> Initializes the object of the system.</li>
<li><code>List&lt;String&gt; ls(String path)</code> The answer should in lexicographic order.<ul>
<li>If <code>path</code> is a file path, returns a list that only contains this file&#39;s name.</li>
<li>If <code>path</code> is a directory path, returns the list of file and directory names <strong>in this directory</strong>.</li>
</ul>
</li>
<li><code>void mkdir(String path)</code> Makes a new directory according to the given <code>path</code>. The given directory path does not exist. If the middle directories in the path do not exist, you should create them as well.</li>
<li><code>void addContentToFile(String filePath, String content)</code><ul>
<li>If <code>filePath</code> does not exist, creates that file containing given <code>content</code>.</li>
<li>If <code>filePath</code> already exists, appends the given <code>content</code> to original content.</li>
</ul>
</li>
<li><code>String readContentFromFile(String filePath)</code> Returns the content in the file at <code>filePath</code>.</li>
</ul>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">[&quot;FileSystem&quot;, &quot;ls&quot;, &quot;mkdir&quot;, &quot;addContentToFile&quot;, &quot;ls&quot;, &quot;readContentFromFile&quot;]</span><br><span class="line">[[], [&quot;/&quot;], [&quot;/a/b/c&quot;], [&quot;/a/b/c/d&quot;, &quot;hello&quot;], [&quot;/&quot;], [&quot;/a/b/c/d&quot;]]</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">[null, [], null, null, [&quot;a&quot;], &quot;hello&quot;]</span><br><span class="line"></span><br><span class="line">Explanation:</span><br><span class="line">FileSystem fileSystem = new FileSystem();</span><br><span class="line">fileSystem.ls(&quot;/&quot;);                               // return []</span><br><span class="line">fileSystem.mkdir(&quot;/a/b/c&quot;);</span><br><span class="line">fileSystem.addContentToFile(&quot;/a/b/c/d&quot;, &quot;hello&quot;);</span><br><span class="line">fileSystem.ls(&quot;/&quot;);                               // return [&quot;a&quot;]</span><br><span class="line">fileSystem.readContentFromFile(&quot;/a/b/c/d&quot;);       // return &quot;hello&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Trie-3"><a href="#Trie-3" class="headerlink" title="Trie"></a>Trie</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileSystem</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Map&lt;String, Node&gt; map;</span><br><span class="line">        <span class="keyword">public</span> StringBuilder content;</span><br><span class="line">        <span class="keyword">public</span> String filename;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="built_in">this</span>.content = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileSystem</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">ls</span><span class="params">(String path)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        String[] arr = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s: arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.length() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> t.map.get(s);</span><br><span class="line">            <span class="keyword">if</span> (next == <span class="literal">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            t = next;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (t.filename != <span class="literal">null</span>) &#123;</span><br><span class="line">            res.add(t.filename);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (String name: t.map.keySet()) &#123;</span><br><span class="line">            res.add(name);</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.sort(res, (a,b)-&gt;a.compareTo(b));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mkdir</span><span class="params">(String path)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        String[] arr = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s: arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.length() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            t.map.putIfAbsent(s, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">            t = t.map.get(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addContentToFile</span><span class="params">(String filePath, String content)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        String[] arr = filePath.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s: arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.length() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            t.map.putIfAbsent(s, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">            t = t.map.get(s);</span><br><span class="line">        &#125;</span><br><span class="line">        t.content.append(content);</span><br><span class="line">        t.filename = arr[arr.length - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readContentFromFile</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        String[] arr = filePath.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s: arr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.length() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            t = t.map.get(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t.content.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="140-Word-Break-II"><a href="#140-Word-Break-II" class="headerlink" title="140. Word Break II"></a>140. Word Break II</h2><p>Given a string <code>s</code> and a dictionary of strings <code>wordDict</code>, add spaces in <code>s</code> to construct a sentence where each word is a valid dictionary word. Return all such possible sentences in <strong>any order</strong>.</p>
<p><strong>Note</strong> that the same word in the dictionary may be reused multiple times in the segmentation.</p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;catsanddog&quot;, wordDict = [&quot;cat&quot;,&quot;cats&quot;,&quot;and&quot;,&quot;sand&quot;,&quot;dog&quot;]</span><br><span class="line">Output: [&quot;cats and dog&quot;,&quot;cat sand dog&quot;]</span><br></pre></td></tr></table></figure>

<p>Example 2:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;pineapplepenapple&quot;, wordDict = [&quot;apple&quot;,&quot;pen&quot;,&quot;applepen&quot;,&quot;pine&quot;,&quot;pineapple&quot;]</span><br><span class="line">Output: [&quot;pine apple pen apple&quot;,&quot;pineapple pen apple&quot;,&quot;pine applepen apple&quot;]</span><br><span class="line">Explanation: Note that you are allowed to reuse a dictionary word.</span><br></pre></td></tr></table></figure>

<h3 id="Trie-4"><a href="#Trie-4" class="headerlink" title="Trie"></a>Trie</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Node[] next;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> isEnd;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">()</span> &#123;</span><br><span class="line">            next = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">26</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (String word: wordDict) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> c: word.toCharArray()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> c - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span> (t.next[m] == <span class="literal">null</span>) &#123;</span><br><span class="line">                    t.next[m] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                t = t.next[m];</span><br><span class="line">            &#125;</span><br><span class="line">            t.isEnd = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        backtracking(s, <span class="number">0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtracking</span><span class="params">(String s, <span class="type">int</span> start, String prev)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (start == s.length()) &#123;</span><br><span class="line">            res.add(prev.substring(<span class="number">0</span>, prev.length()-<span class="number">1</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; s.length() &amp;&amp; t != <span class="literal">null</span>; i++) &#123;</span><br><span class="line">            t = t.next[s.charAt(i) - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            <span class="keyword">if</span> (t != <span class="literal">null</span> &amp;&amp; t.isEnd) &#123;</span><br><span class="line">                backtracking(s, i+<span class="number">1</span>, prev + s.substring(start, i+<span class="number">1</span>) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    <footer class="post-footer">
      
      <div class="post-tags">
        
          <a href="/tags/Algorithm/">Algorithm</a>
        
      </div>
      

      
      
  <nav class="post-nav">
    
      <a class="prev" href="/p/c984.html">
        <i class="icon-left"></i>
        <span class="prev-text nav-default">Binary Search Tree</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/p/7faa.html">
        <span class="next-text nav-default">Monotonic Queue</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="icon-right"></i>
      </a>
    
  </nav>

      
    </footer>
  </article>

  </div>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    showProcessingMessages: true,
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: false,
        skipTags: ["script","noscript","style","textarea"]
    },
    TeX: {
        Macros:{
            Arr: ["\\{ #1 \\}", 1],
            fi: "{f\\,\\!_i}",
            SS: ["{#1\\:\\!_#2}",2],
            SUBx: ["{\\:\\!_#1}",1],
            EXPx: ["{\\;\\!^#1}",1],
            Ss: ["{#1\\,\\!_#2}",2],
            subx: ["{\\,\\!_#1}",1]
        }
    }
});
</script>


      </div>
    </div>

    
<script type="text/javascript">
  var disqus_shortname = 'zaf1ro';
  var disqus_identifier = 'p/9055.html';
  var disqus_title = "Trie";

  var disqus = {
    load : function disqus(){
        if(typeof DISQUS !== 'object') {
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
          $('#load-disqus').remove(); ///加载后移除按钮
        }
    }
  }

  
    var disqus_config = function () {
        this.page.url = disqus_url;
        this.page.identifier = disqus_identifier;
        this.page.title = disqus_title;
    };
  

</script>



    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.6.0.min.js"></script>
  

  

    
    <script type="text/javascript">
(function(){"use strict";var Theme={};Theme.backToTop={register:function(){var $backToTop=$('#back-to-top');$(window).scroll(function(){if($(window).scrollTop()>100){$backToTop.fadeIn(1000)}else{$backToTop.fadeOut(1000)}});$backToTop.click(function(){$('body').animate({scrollTop:0})})}};Theme.fancybox={register:function(){if($.fancybox){$('.post').each(function(){$(this).find('img').each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})});$('.fancybox').fancybox({openEffect:'elastic',closeEffect:'elastic'})}}};this.Theme=Theme}.call(this));
</script>

<script type="text/javascript">
$(document).ready(function(){if(themeConfig.fancybox.enable){Theme.fancybox.register()}Theme.backToTop.register()});
</script>
    
<script type="text/javascript">
var themeConfig = {
  fancybox: {
    enable: false
  },
};
</script>

    <script>
    $('table').wrap('<div style="overflow-x: auto;"></div>');
</script>
    
    <script>
$(document).ready(function () {
    $('#sidebarCollapse').on('click', function(){
        $('#sidebar').toggleClass('active');
    });

    $('#toc ol li a').on('click', function(){
        $('#sidebar').toggleClass('active');
    });
});
</script>
  </body>
</html>
