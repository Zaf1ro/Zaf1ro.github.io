<!DOCTYPE html>
<html lang="zh">
  <head>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



  <meta name="description" content="Bucket Sort"/>




  <meta name="keywords" content="Algorithm," />


<meta name="google-site-verification" content="qy4gf0StWj627u-7aIP3WDCLBi3jPYXhm57UC7TUcok" />
<meta name="baidu-site-verification" content="XJoPG7ad2Z" />

<link rel="alternate" hreflang="x-default" href="https://zaf1ro.github.io/p/4181.html" />
<link rel="alternate" hreflang="zh" href="https://zaf1ro.github.io/p/4181.html" />




  <link rel="alternate" href="/default" title="Zaf1ro" >




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.jpeg?v=1.1" />



<link rel="canonical" href="https://zaf1ro.github.io/p/4181.html"/>


<meta name="description" content="Bucket SortBucket sort先将元素分配到多个bucket, 再通过不同的排序算法或递归应用bucket sort来实现对每个bucket内元素的排序. 该算法的时间复杂度取决于: bucket内的元素排序, bucket数量, 输入元素是否分布均匀. 以下是bucket sort的算法步骤:  初始化多个bucket 遍历原始数组, 将每个元素分配到不同bucket中 对非空bu">
<meta property="og:type" content="article">
<meta property="og:title" content="Bucket Sort">
<meta property="og:url" content="https://zaf1ro.github.io/p/4181.html">
<meta property="og:site_name" content="Zaf1ro">
<meta property="og:description" content="Bucket SortBucket sort先将元素分配到多个bucket, 再通过不同的排序算法或递归应用bucket sort来实现对每个bucket内元素的排序. 该算法的时间复杂度取决于: bucket内的元素排序, bucket数量, 输入元素是否分布均匀. 以下是bucket sort的算法步骤:  初始化多个bucket 遍历原始数组, 将每个元素分配到不同bucket中 对非空bu">
<meta property="og:locale">
<meta property="og:image" content="https://zaf1ro.github.io/images/Algorithm/Bucket_sort_1.png">
<meta property="og:image" content="https://zaf1ro.github.io/images/Algorithm/Bucket_sort_2.png">
<meta property="article:published_time" content="2023-03-21T02:48:10.000Z">
<meta property="article:modified_time" content="2024-08-20T16:43:04.026Z">
<meta property="article:tag" content="Algorithm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zaf1ro.github.io/images/Algorithm/Bucket_sort_1.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />




    <title>
Bucket Sort - Zaf1ro
</title>
  <meta name="generator" content="Hexo 6.3.0"></head>

  <body>
  <nav id="sidebar" class="active on-post">
    <div id="third">
      <div id="sidebar-title">
        <h1 id="sidebar-title-text">
            <a href="/." class="logo">Home</a>
        </h1>
      </div>
      <div id="google-search">
  <script async src="https://cse.google.com/cse.js?cx=009060789867951546370:v3hkcobeuh9"></script>
  <div class="gcse-search"></div>
</div>
      
  <div id="toc">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Bucket-Sort"><span class="toc-text">Bucket Sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#451-Sort-Characters-By-Frequency"><span class="toc-text">451. Sort Characters By Frequency</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bucket-Sort-1"><span class="toc-text">Bucket Sort</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#347-Top-K-Frequent-Elements"><span class="toc-text">347. Top K Frequent Elements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bucket-Sort-2"><span class="toc-text">Bucket Sort</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#220-Contains-Duplicate-III"><span class="toc-text">220. Contains Duplicate III</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Slide-Window-Bucket-Sort"><span class="toc-text">Slide Window + Bucket Sort</span></a></li></ol></li></ol>
  </div>

    </div>
  </nav>

    <div id="page">
      <header id="masthead"><div class="site-header-inner">
  
  <button class="nav-mobile-button on-post" id="sidebarCollapse">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/></svg>
  </button>
  
  


  <nav id="nav-top">
    
      
      <ul id="menu-top" class="nav-top-items on-post">
      
        
          <li class="menu-item">
            <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zaf1ro">
              
              
                Github
              
            </a>
          </li>
        
      </ul>
    
  </nav>
</div>

      </header>
      <div id="content">
        
  <div class="primary">
    
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Bucket Sort
        
      </h1>
      <time class="post-time">
          03/20/23
      </time>
    </header>

    <div class="post-content">
      <h2 id="Bucket-Sort"><a href="#Bucket-Sort" class="headerlink" title="Bucket Sort"></a>Bucket Sort</h2><p>Bucket sort先将元素分配到多个bucket, 再通过不同的排序算法或递归应用bucket sort来实现对每个bucket内元素的排序. 该算法的时间复杂度取决于: bucket内的元素排序, bucket数量, 输入元素是否分布均匀. 以下是bucket sort的算法步骤:</p>
<ol>
<li>初始化多个bucket</li>
<li>遍历原始数组, 将每个元素分配到不同bucket中</li>
<li>对非空bucket内的元素排序</li>
<li>依次访问bucket, 并将元素放回数组</li>
</ol>
<p><img src="/images/Algorithm/Bucket_sort_1.png" alt="Bucket sort: scatter"><br><img src="/images/Algorithm/Bucket_sort_2.png" alt="Bucket sort: gather"></p>
<h2 id="451-Sort-Characters-By-Frequency"><a href="#451-Sort-Characters-By-Frequency" class="headerlink" title="451. Sort Characters By Frequency"></a>451. Sort Characters By Frequency</h2><p>Given a string <code>s</code>, sort it in <strong>decreasing order</strong> based on the <strong>frequency</strong> of the characters. The <strong>frequency</strong> of a character is the number of times it appears in the string.</p>
<p>Return the sorted string. If there are multiple answers, return any of them.</p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;tree&quot;</span><br><span class="line">Output: &quot;eert&quot;</span><br><span class="line">Explanation: &#x27;e&#x27; appears twice while &#x27;r&#x27; and &#x27;t&#x27; both appear once.</span><br><span class="line">So &#x27;e&#x27; must appear before both &#x27;r&#x27; and &#x27;t&#x27;. Therefore &quot;eetr&quot; is also a valid answer.</span><br></pre></td></tr></table></figure>

<h3 id="Bucket-Sort-1"><a href="#Bucket-Sort-1" class="headerlink" title="Bucket Sort"></a>Bucket Sort</h3><p>字符串的字符范围为ascii子集, 每个字符的出现次数为<code>[0, Length_of_string]</code>, 题目要求字符按照出现频率从小到大排列, 因此可使用bucket sort. 步骤如下:</p>
<ol>
<li>遍历字符串, 将每个字符的出现次数记录在<code>count</code>数组中</li>
<li>遍历<code>count</code>, 将每个出现次数对应的字符记录在<code>alpha</code>数组中</li>
<li>从小到大遍历<code>alpha</code>, 将每个字符保存在结果中</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">frequencySort</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>];</span><br><span class="line">        List&lt;Character&gt;[] alpha = <span class="keyword">new</span> <span class="title class_">List</span>[n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c: s.toCharArray()) &#123;</span><br><span class="line">            ++count[c];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            alpha[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">128</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (count[i] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            alpha[count[i]].add((<span class="type">char</span>)i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Character c: alpha[i]) &#123;</span><br><span class="line">                sb.append(String.valueOf(c).repeat(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="347-Top-K-Frequent-Elements"><a href="#347-Top-K-Frequent-Elements" class="headerlink" title="347. Top K Frequent Elements"></a>347. Top K Frequent Elements</h2><p>Given an integer array <code>nums</code> and an integer <code>k</code>, return the <code>k</code> most frequent elements. You may return the answer in <strong>any order</strong>.</p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,1,1,2,2,3], k = 2</span><br><span class="line">Output: [1,2]</span><br></pre></td></tr></table></figure>

<h3 id="Bucket-Sort-2"><a href="#Bucket-Sort-2" class="headerlink" title="Bucket Sort"></a>Bucket Sort</h3><p>思路与上一题相同, 先统计每个数字出现的频率, 再将相同频率的数字放入一个集合中, 最后按照频率从大到小取出数字.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] topKFrequent(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">20001</span>], res = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num: nums) &#123;</span><br><span class="line">            ++count[num + <span class="number">10000</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt;[] frequency = <span class="keyword">new</span> <span class="title class_">List</span>[n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            frequency[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= <span class="number">20000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (count[i] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            frequency[count[i]].add(i - <span class="number">10000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n, t = <span class="number">0</span>; i &gt; <span class="number">0</span> &amp;&amp; t &lt; k; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> num: frequency[i]) &#123;</span><br><span class="line">                res[t++] = num;</span><br><span class="line">                <span class="keyword">if</span> (t == k) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="220-Contains-Duplicate-III"><a href="#220-Contains-Duplicate-III" class="headerlink" title="220. Contains Duplicate III"></a>220. Contains Duplicate III</h2><p>You are given an integer array <code>nums</code> and two integers <code>indexDiff</code> and <code>valueDiff</code>.</p>
<p>Find a pair of indices <code>(i, j)</code> such that:</p>
<ul>
<li><code>i != j</code></li>
<li><code>abs(i - j) &lt;= indexDiff</code></li>
<li><code>abs(nums[i] - nums[j]) &lt;= valueDiff</code></li>
</ul>
<p>Return <code>true</code> if such pair exists or <code>false</code> otherwise.</p>
<p>Example 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,2,3,1], indexDiff = 3, valueDiff = 0</span><br><span class="line">Output: true</span><br><span class="line">Explanation: We can choose (i, j) = (0, 3).</span><br><span class="line">We satisfy the three conditions:</span><br><span class="line">i != j --&gt; 0 != 3</span><br><span class="line">abs(i - j) &lt;= indexDiff --&gt; abs(0 - 3) &lt;= 3</span><br><span class="line">abs(nums[i] - nums[j]) &lt;= valueDiff --&gt; abs(1 - 1) &lt;= 0</span><br></pre></td></tr></table></figure>

<h3 id="Slide-Window-Bucket-Sort"><a href="#Slide-Window-Bucket-Sort" class="headerlink" title="Slide Window + Bucket Sort"></a>Slide Window + Bucket Sort</h3><p>题目对数组内的任意两个元素(<code>nums[i]</code>与<code>nums[j]</code>)有两点要求:</p>
<ul>
<li><code>abs(i - j) &lt;= indexDiff</code></li>
<li><code>abs(nums[i] - nums[j]) &lt;= valueDiff</code></li>
</ul>
<p>对于第一点要求, 可通过slide window不断添加新的元素, 并删除范围之外的旧元素; 对于第二点要求, 可将每个元素放入bucket: 假设数组内元素为<code>0, 1, 2, 3, 4, 5, 6, 7</code>, valueDiff为3, 让每个元素除以<code>valueDiff + 1</code>后, 数组变为<code>0, 0, 0, 0, 1, 1, 1, 1</code>, 可以发现, 前四个元素为0, 接下来四个元素为1, 每四个元素作为一个bucket, 每个bucket内的最大差值为valueDiff, 因此:</p>
<ul>
<li>若两个数字处于同一bucket, 则其差值必小于或等于valueDiff</li>
<li>若两个数字处于相邻bucket, 则其差值可能小于或等于valueDiff</li>
<li>若两个数字对应的bucket间隔一个或多个bucket, 则其差值必大于valueDiff</li>
</ul>
<p>需要注意的是, 由于0不属于正值或负值, 假设valueDiff为3, 则0与1,2,3处于同一bucket, 也与-1,-2,-3处于同一bucket, 因此需特殊处理负值的bucket. </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsNearbyAlmostDuplicate</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> indexDiff, <span class="type">int</span> valueDiff)</span> &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="comment">// bucket sort</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> getBucket(nums[i], valueDiff + <span class="number">1</span>);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">l</span> <span class="operator">=</span> map.get(b-<span class="number">1</span>), m = map.get(b), r = map.get(b+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (m != <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (l != <span class="literal">null</span> &amp;&amp; nums[i] - l &lt;= valueDiff) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (r != <span class="literal">null</span> &amp;&amp; r - nums[i] &lt;= valueDiff) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            map.put(b, nums[i]);</span><br><span class="line">            <span class="comment">// slide window</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= indexDiff) map.remove(getBucket(nums[i-indexDiff], valueDiff + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getBucket</span><span class="params">(<span class="type">int</span> num, <span class="type">int</span> diff)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num &lt; <span class="number">0</span> ? (num + <span class="number">1</span>) / diff - <span class="number">1</span> : num / diff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    <footer class="post-footer">
      
      <div class="post-tags">
        
          <a href="/tags/Algorithm/">Algorithm</a>
        
      </div>
      

      
      
  <nav class="post-nav">
    
      <a class="prev" href="/p/ab19.html">
        <i class="icon-left"></i>
        <span class="prev-text nav-default">Merge Sort</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/p/387d.html">
        <span class="next-text nav-default">Counting Sort</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="icon-right"></i>
      </a>
    
  </nav>

      
    </footer>
  </article>

  </div>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    showProcessingMessages: true,
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: false,
        skipTags: ["script","noscript","style","textarea"]
    },
    TeX: {
        Macros:{
            Arr: ["\\{ #1 \\}", 1],
            fi: "{f\\,\\!_i}",
            SS: ["{#1\\:\\!_#2}",2],
            SUBx: ["{\\:\\!_#1}",1],
            EXPx: ["{\\;\\!^#1}",1],
            Ss: ["{#1\\,\\!_#2}",2],
            subx: ["{\\,\\!_#1}",1]
        }
    }
});
</script>


      </div>
    </div>

    
<script type="text/javascript">
  var disqus_shortname = 'zaf1ro';
  var disqus_identifier = 'p/4181.html';
  var disqus_title = "Bucket Sort";

  var disqus = {
    load : function disqus(){
        if(typeof DISQUS !== 'object') {
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
          $('#load-disqus').remove(); ///加载后移除按钮
        }
    }
  }

  
    var disqus_config = function () {
        this.page.url = disqus_url;
        this.page.identifier = disqus_identifier;
        this.page.title = disqus_title;
    };
  

</script>



    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.6.0.min.js"></script>
  

  

    
    <script type="text/javascript">
(function(){"use strict";var Theme={};Theme.backToTop={register:function(){var $backToTop=$('#back-to-top');$(window).scroll(function(){if($(window).scrollTop()>100){$backToTop.fadeIn(1000)}else{$backToTop.fadeOut(1000)}});$backToTop.click(function(){$('body').animate({scrollTop:0})})}};Theme.fancybox={register:function(){if($.fancybox){$('.post').each(function(){$(this).find('img').each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})});$('.fancybox').fancybox({openEffect:'elastic',closeEffect:'elastic'})}}};this.Theme=Theme}.call(this));
</script>

<script type="text/javascript">
$(document).ready(function(){if(themeConfig.fancybox.enable){Theme.fancybox.register()}Theme.backToTop.register()});
</script>
    
<script type="text/javascript">
var themeConfig = {
  fancybox: {
    enable: false
  },
};
</script>

    <script>
    $('table').wrap('<div style="overflow-x: auto;"></div>');
</script>
    
    <script>
$(document).ready(function () {
    $('#sidebarCollapse').on('click', function(){
        $('#sidebar').toggleClass('active');
    });

    $('#toc ol li a').on('click', function(){
        $('#sidebar').toggleClass('active');
    });
});
</script>
  </body>
</html>
